@using Microsoft.AspNetCore.Identity
@using JATS.Services.Interfaces
@inject UserManager<JTUser> UserManager
@inject IRolesService RoleService

@model Company

@{
    ViewData["Title"] = $"J.A.T.S - {Model.Name}";
    JTUser user = await UserManager.GetUserAsync(User);
    var roles = (await RoleService.GetUserRolesAsync(user));
}


@*Current User*@
      <div class="container-fluid">
        <div
          class="page-header min-height-300 border-radius-xl mt-4"
          style="background-image: url('img/curved-images/curved0.jpg');background-position-y: 50%; background-size:cover"
        >
          <span class="mask bg-gradient-primary opacity-6"></span>
        </div>
        <div class="card card-body blur shadow-blur mx-4 mt-n6 overflow-hidden">
          <div class="row gx-4">
            <div class="col-auto">
              <div class="avatar avatar-xl position-relative">
                  
                  @if (user?.AvatarData != null)
                 {

               <img class="w-100 border-radius-lg shadow-sm"
               alt="profile_image"
                src="data:image/*;base64,@(Convert.ToBase64String(user.AvatarData))" />
                 }
                 else
                 {
                <img
                  src="https://cdn.icon-icons.com/icons2/1378/PNG/512/avatardefault_92824.png"
                  alt="profile_image"
                  class="w-100 border-radius-lg shadow-sm"
                />
                }
              </div>
            </div>
            <div class="col-auto my-auto">
              <div class="h-100">
                <h5 class="mb-1">@user.FullName</h5>
                <p class="mb-0 font-weight-bold text-sm">
                    @foreach (var role in roles)
                   {
                    <span>@role</span>
                    }
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
@*Current User*@

      <div class="container-fluid py-4">
          
      @*Team members*@
        <div class="row">
          <div class="col-12">
            <div class="card overflow-hidden">

              <div class="card-body d-flex">

                    @if (User.IsInRole(JATS.Models.Enums.Roles.Admin.ToString()))
                    {
                        
                <div class="col-lg-1 col-md-2 col-sm-3 col-4 text-center">
                  <a
                    href="javascript:;"
                    class="avatar avatar-lg border-1 rounded-circle bg-gradient-primary"
                  >
                    <i class="fas fa-plus text-white"></i>
                  </a>
                  <p class="mb-0 text-sm" style="margin-top: 6px">Add A Member</p>
                </div>
                    }

                    @foreach (var member in @Model.Members)
                {
                <div class="col-lg-1 col-md-2 col-sm-3 col-4 text-center">
                        <a
                          href="javascript:;"
                          class="avatar avatar-lg rounded-circle border border-primary"
                        >


                @if (member?.AvatarData != null)
                 {

               <img alt="Image placeholder"
                            class="p-1"
                src="data:image/*;base64,@(Convert.ToBase64String(member.AvatarData))" />
                 }
                 else
                 {
                <img
                  src="https://cdn.icon-icons.com/icons2/1378/PNG/512/avatardefault_92824.png"
                  alt="Image placeholder"
                            class="p-1"
                />
                }



                        </a>
                        <p class="mb-0 text-sm">@member.FirstName @member.LastName[0]</p>
                </div>
                }


              </div>
            </div>
          </div>
        </div>
      @*Team members*@


        <div class="row mt-4">
          <div class="col-12 col-lg-8">
            <div class="card">
              <div
                class="card-header d-flex align-items-center border-bottom py-3"
              >
                <div class="d-flex align-items-center">
                  <a href="javascript:;">
                    <img
                      src="~/img/team-4.jpg"
                      class="avatar"
                      alt="profile-image"
                    />
                  </a>
                  <div class="mx-3">
                    <a
                      href="javascript:;"
                      class="text-dark font-weight-600 text-sm"
                      >John Snow</a
                    >
                    <small class="d-block text-muted">3 days ago</small>
                  </div>
                </div>
                <div class="text-end ms-auto">
                  <button
                    type="button"
                    class="btn btn-sm bg-gradient-primary mb-0"
                  >
                    <i class="fas fa-plus pe-2"></i> Follow
                  </button>
                </div>
              </div>
              <div class="card-body">
                <p class="mb-4">
                  Personal profiles are the perfect way for you to grab their
                  attention and persuade recruiters to continue reading your CV
                  because you’re telling them from the off exactly why they
                  should hire you.
                </p>
                <img
                  alt="Image placeholder"
                  src="https://images.unsplash.com/photo-1552581234-26160f608093?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2100&q=80"
                  class="img-fluid border-radius-lg shadow-lg"
                />
                <div class="row align-items-center px-2 mt-4 mb-2">
                  <div class="col-sm-6">
                    <div class="d-flex">
                      <div class="d-flex align-items-center">
                        <i class="ni ni-like-2 me-1 cursor-pointer"></i>
                        <span class="text-sm me-3">150</span>
                      </div>
                      <div class="d-flex align-items-center">
                        <i class="ni ni-chat-round me-1 cursor-pointer"></i>
                        <span class="text-sm me-3">36</span>
                      </div>
                      <div class="d-flex align-items-center">
                        <i class="ni ni-curved-next me-1 cursor-pointer"></i>
                        <span class="text-sm me-2">12</span>
                      </div>
                    </div>
                  </div>
                  <div class="col-sm-6 d-none d-sm-block">
                    <div
                      class="d-flex align-items-center justify-content-sm-end"
                    >
                      <div class="d-flex align-items-center">
                        <a
                          href="javascript:;"
                          class="avatar avatar-xs rounded-circle"
                          data-toggle="tooltip"
                          data-original-title="Jessica Rowland"
                        >
                          <img
                            alt="Image placeholder"
                            src="~/img/team-5.jpg"
                            class=""
                          />
                        </a>
                        <a
                          href="javascript:;"
                          class="avatar avatar-xs rounded-circle"
                          data-toggle="tooltip"
                          data-original-title="Audrey Love"
                        >
                          <img
                            alt="Image placeholder"
                            src="~/img/team-2.jpg"
                            class="rounded-circle"
                          />
                        </a>
                        <a
                          href="javascript:;"
                          class="avatar avatar-xs rounded-circle"
                          data-toggle="tooltip"
                          data-original-title="Michael Lewis"
                        >
                          <img
                            alt="Image placeholder"
                            src="~/img/team-1.jpg"
                            class="rounded-circle"
                          />
                        </a>
                      </div>
                      <small class="ps-2 font-weight-bold">and 30+ more</small>
                    </div>
                  </div>
                  <hr class="horizontal dark my-3" />
                </div>

                <div class="mb-1">
                  <div class="d-flex">
                    <div class="flex-shrink-0">
                      <img
                        alt="Image placeholder"
                        class="avatar rounded-circle"
                        src="~/img/bruce-mars.jpg"
                      />
                    </div>
                    <div class="flex-grow-1 ms-3">
                      <h6 class="h5 mt-0">Michael Lewis</h6>
                      <p class="text-sm">
                        I always felt like I could do anything. That’s the main
                        thing people are controlled by! Thoughts- their
                        perception of themselves!
                      </p>
                      <div class="d-flex">
                        <div>
                          <i class="ni ni-like-2 me-1 cursor-pointer"></i>
                        </div>
                        <span class="text-sm me-2">3 likes</span>
                        <div>
                          <i class="ni ni-curved-next me-1 cursor-pointer"></i>
                        </div>
                        <span class="text-sm me-2">2 shares</span>
                      </div>
                    </div>
                  </div>
                  <div class="d-flex mt-3">
                    <div class="flex-shrink-0">
                      <img
                        alt="Image placeholder"
                        class="avatar rounded-circle"
                        src="~/img/team-5.jpg"
                      />
                    </div>
                    <div class="flex-grow-1 ms-3">
                      <h6 class="h5 mt-0">Jessica Stones</h6>
                      <p class="text-sm">
                        Society has put up so many boundaries, so many
                        limitations on what’s right and wrong that it’s almost
                        impossible to get a pure thought out. It’s like a little
                        kid, a little boy.
                      </p>
                      <div class="d-flex">
                        <div>
                          <i class="ni ni-like-2 me-1 cursor-pointer"></i>
                        </div>
                        <span class="text-sm me-2">10 likes</span>
                        <div>
                          <i class="ni ni-curved-next me-1 cursor-pointer"></i>
                        </div>
                        <span class="text-sm me-2">1 share</span>
                      </div>
                    </div>
                  </div>
                  <div class="d-flex mt-4">
                    <div class="flex-shrink-0">
                      <img
                        alt="Image placeholder"
                        class="avatar rounded-circle me-3"
                        src="~/img/team-4.jpg"
                      />
                    </div>
                    <div class="flex-grow-1 my-auto">
                      <form>
                        <textarea
                          class="form-control"
                          placeholder="Write your comment"
                          rows="1"
                        ></textarea>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-12 col-lg-4">
            <div class="card mb-3 mt-lg-0 mt-4">
              <div class="card-body pb-0">
                <div class="row align-items-center mb-3">
                  <div class="col-9">
                    <h5 class="mb-1 text-gradient text-primary">
                      <a href="javascript:;">Digital Marketing</a>
                    </h5>
                  </div>
                  <div class="col-3 text-end">
                    <div class="dropstart">
                      <a
                        href="javascript:;"
                        class="text-secondary"
                        id="dropdownMarketingCard"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                      >
                        <i class="fas fa-ellipsis-v"></i>
                      </a>
                      <ul
                        class="dropdown-menu dropdown-menu-lg-start px-2 py-3"
                        aria-labelledby="dropdownMarketingCard"
                      >
                        <li>
                          <a
                            class="dropdown-item border-radius-md"
                            href="javascript:;"
                            >Edit Team</a
                          >
                        </li>
                        <li>
                          <a
                            class="dropdown-item border-radius-md"
                            href="javascript:;"
                            >Add Member</a
                          >
                        </li>
                        <li>
                          <a
                            class="dropdown-item border-radius-md"
                            href="javascript:;"
                            >See Details</a
                          >
                        </li>
                        <li>
                          <hr class="dropdown-divider" />
                        </li>
                        <li>
                          <a
                            class="dropdown-item border-radius-md text-danger"
                            href="javascript:;"
                            >Remove Team</a
                          >
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
                <p>
                  A group of people who collectively are responsible for all of
                  the work necessary to produce working, validated assets.
                </p>
                <ul class="list-unstyled mx-auto">
                  <li class="d-flex">
                    <p class="mb-0">Industry:</p>
                    <span class="badge badge-secondary ms-auto"
                      >Marketing Team</span
                    >
                  </li>
                  <li>
                    <hr class="horizontal dark" />
                  </li>
                  <li class="d-flex">
                    <p class="mb-0">Rating:</p>
                    <div class="rating ms-auto">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star-half-alt"></i>
                    </div>
                  </li>
                  <li>
                    <hr class="horizontal dark" />
                  </li>
                  <li class="d-flex">
                    <p class="mb-0">Members:</p>
                    <div class="avatar-group ms-auto">
                      <a
                        href="javascript:;"
                        class="avatar avatar-lg avatar-xs rounded-circle"
                        data-bs-toggle="tooltip"
                        data-bs-placement="bottom"
                        title="Alexa Tompson"
                      >
                        <img
                          alt="Image placeholder"
                          src="~/img/team-1.jpg"
                        />
                      </a>
                      <a
                        href="javascript:;"
                        class="avatar avatar-lg avatar-xs rounded-circle"
                        data-bs-toggle="tooltip"
                        data-bs-placement="bottom"
                        title="Romina Hadid"
                      >
                        <img
                          alt="Image placeholder"
                          src="~/img/team-2.jpg"
                        />
                      </a>
                      <a
                        href="javascript:;"
                        class="avatar avatar-lg avatar-xs rounded-circle"
                        data-bs-toggle="tooltip"
                        data-bs-placement="bottom"
                        title="Alexander Smith"
                      >
                        <img
                          alt="Image placeholder"
                          src="~/img/team-3.jpg"
                        />
                      </a>
                      <a
                        href="javascript:;"
                        class="avatar avatar-lg avatar-xs rounded-circle"
                        data-bs-toggle="tooltip"
                        data-bs-placement="bottom"
                        title="Martin Doe"
                      >
                        <img
                          alt="Image placeholder"
                          src="~/img/team-4.jpg"
                        />
                      </a>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
            <div class="card mt-4 mb-3">
              <div class="card-body pb-0">
                <div class="row align-items-center mb-3">
                  <div class="col-9">
                    <h5 class="mb-1 text-gradient text-primary">
                      <a href="javascript:;">Design</a>
                    </h5>
                  </div>
                  <div class="col-3 text-end">
                    <div class="dropstart">
                      <a
                        href="javascript:;"
                        class="text-secondary"
                        id="dropdownDesignCard"
                        data-bs-toggle="dropdown"
                        aria-expanded="false"
                      >
                        <i class="fas fa-ellipsis-v"></i>
                      </a>
                      <ul
                        class="dropdown-menu dropdown-menu-lg-start px-2 py-3"
                        aria-labelledby="dropdownDesignCard"
                      >
                        <li>
                          <a
                            class="dropdown-item border-radius-md"
                            href="javascript:;"
                            >Edit Team</a
                          >
                        </li>
                        <li>
                          <a
                            class="dropdown-item border-radius-md"
                            href="javascript:;"
                            >Add Member</a
                          >
                        </li>
                        <li>
                          <a
                            class="dropdown-item border-radius-md"
                            href="javascript:;"
                            >See Details</a
                          >
                        </li>
                        <li>
                          <hr class="dropdown-divider" />
                        </li>
                        <li>
                          <a
                            class="dropdown-item border-radius-md text-danger"
                            href="javascript:;"
                            >Remove Team</a
                          >
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
                <p>
                  Because it's about motivating the doers. Because I’m here to
                  follow my dreams and inspire other people to follow their
                  dreams, too.
                </p>
                <ul class="list-unstyled mx-auto">
                  <li class="d-flex">
                    <p class="mb-0">Industry:</p>
                    <span class="badge badge-secondary ms-auto"
                      >Design Team</span
                    >
                  </li>
                  <li>
                    <hr class="horizontal dark" />
                  </li>
                  <li class="d-flex">
                    <p class="mb-0">Rating:</p>
                    <div class="rating ms-auto">
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                      <i class="fas fa-star"></i>
                    </div>
                  </li>
                  <li>
                    <hr class="horizontal dark" />
                  </li>
                  <li class="d-flex">
                    <p class="mb-0">Members:</p>
                    <div class="avatar-group ms-auto">
                      <a
                        href="javascript:;"
                        class="avatar avatar-lg avatar-xs rounded-circle"
                        data-bs-toggle="tooltip"
                        data-bs-placement="bottom"
                        title="Martin Doe"
                      >
                        <img
                          alt="Image placeholder"
                          src="~/img/team-4.jpg"
                        />
                      </a>
                      <a
                        href="javascript:;"
                        class="avatar avatar-lg avatar-xs rounded-circle"
                        data-bs-toggle="tooltip"
                        data-bs-placement="bottom"
                        title="Romina Hadid"
                      >
                        <img
                          alt="Image placeholder"
                          src="~/img/team-3.jpg"
                        />
                      </a>
                      <a
                        href="javascript:;"
                        class="avatar avatar-lg avatar-xs rounded-circle"
                        data-bs-toggle="tooltip"
                        data-bs-placement="bottom"
                        title="Alexa Tompson"
                      >
                        <img
                          alt="Image placeholder"
                          src="~/img/team-1.jpg"
                        />
                      </a>
                      <a
                        href="javascript:;"
                        class="avatar avatar-lg avatar-xs rounded-circle"
                        data-bs-toggle="tooltip"
                        data-bs-placement="bottom"
                        title="Alexandra Smith"
                      >
                        <img
                          alt="Image placeholder"
                          src="~/img/team-5.jpg"
                        />
                      </a>
                    </div>
                  </li>
                </ul>
              </div>
            </div>
            <div class="card mt-4">
              <div class="card-body p-3">
                <div class="d-flex">
                  <div class="avatar avatar-lg">
                    <img
                      alt="Image placeholder"
                      src="~/img/small-logos/logo-slack.svg"
                    />
                  </div>
                  <div class="ms-2 my-auto">
                    <h6 class="mb-0">Slack Meet</h6>
                    <p class="text-xs mb-0">11:00 AM</p>
                  </div>
                </div>
                <p class="mt-3">
                  You have an upcoming meet for Marketing Planning
                </p>
                <p class="mb-0"><b>Meeting ID:</b> 902-128-281</p>
                <hr class="horizontal dark" />
                <div class="d-flex">
                  <button
                    type="button"
                    class="btn btn-sm bg-gradient-success mb-0"
                  >
                    Join
                  </button>
                  <div class="avatar-group ms-auto">
                    <a
                      href="javascript:;"
                      class="avatar avatar-lg avatar-xs rounded-circle"
                      data-bs-toggle="tooltip"
                      data-bs-placement="bottom"
                      title="Alexa Tompson"
                    >
                      <img
                        alt="Image placeholder"
                        src="~/img/team-1.jpg"
                      />
                    </a>
                    <a
                      href="javascript:;"
                      class="avatar avatar-lg avatar-xs rounded-circle"
                      data-bs-toggle="tooltip"
                      data-bs-placement="bottom"
                      title="Romina Hadid"
                    >
                      <img
                        alt="Image placeholder"
                        src="~/img/team-2.jpg"
                      />
                    </a>
                    <a
                      href="javascript:;"
                      class="avatar avatar-lg avatar-xs rounded-circle"
                      data-bs-toggle="tooltip"
                      data-bs-placement="bottom"
                      title="Alexander Smith"
                    >
                      <img
                        alt="Image placeholder"
                        src="~/img/team-3.jpg"
                      />
                    </a>
                    <a
                      href="javascript:;"
                      class="avatar avatar-lg avatar-xs rounded-circle"
                      data-bs-toggle="tooltip"
                      data-bs-placement="bottom"
                      title="Martin Doe"
                    >
                      <img
                        alt="Image placeholder"
                        src="~/img/ivana-squares.jpg"
                      />
                    </a>
                  </div>
                </div>
              </div>
            </div>
            <div class="card mt-4">
              <div class="card-body p-3">
                <div class="d-flex">
                  <div class="avatar avatar-lg">
                    <img
                      alt="Image placeholder"
                      src="~/img/small-logos/logo-invision.svg"
                    />
                  </div>
                  <div class="ms-2 my-auto">
                    <h6 class="mb-0">Invision</h6>
                    <p class="text-xs mb-0">4:50 PM</p>
                  </div>
                </div>
                <p class="mt-3">
                  You have an upcoming video call for
                  <span class="text-primary">Soft Design</span> at 5:00 PM.
                </p>
                <p class="mb-0"><b>Meeting ID:</b> 111-968-981</p>
                <hr class="horizontal dark" />
                <div class="d-flex">
                  <button
                    type="button"
                    class="btn btn-sm bg-gradient-success mb-0"
                  >
                    Join
                  </button>
                  <div class="avatar-group ms-auto">
                    <a
                      href="javascript:;"
                      class="avatar avatar-lg avatar-xs rounded-circle"
                      data-bs-toggle="tooltip"
                      data-bs-placement="bottom"
                      title="Alexa Tompson"
                    >
                      <img
                        alt="Image placeholder"
                        src="~/img/team-1.jpg"
                      />
                    </a>
                    <a
                      href="javascript:;"
                      class="avatar avatar-lg avatar-xs rounded-circle"
                      data-bs-toggle="tooltip"
                      data-bs-placement="bottom"
                      title="Romina Hadid"
                    >
                      <img
                        alt="Image placeholder"
                        src="~/img/team-2.jpg"
                      />
                    </a>
                    <a
                      href="javascript:;"
                      class="avatar avatar-lg avatar-xs rounded-circle"
                      data-bs-toggle="tooltip"
                      data-bs-placement="bottom"
                      title="Alexander Smith"
                    >
                      <img
                        alt="Image placeholder"
                        src="~/img/team-3.jpg"
                      />
                    </a>
                    <a
                      href="javascript:;"
                      class="avatar avatar-lg avatar-xs rounded-circle"
                      data-bs-toggle="tooltip"
                      data-bs-placement="bottom"
                      title="Martin Doe"
                    >
                      <img
                        alt="Image placeholder"
                        src="~/img/ivana-squares.jpg"
                      />
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <footer class="footer pt-3">
          <div class="container-fluid">
            <div class="row align-items-center justify-content-lg-between">
              <div class="col-lg-6 mb-lg-0 mb-4">
                <div
                  class="copyright text-center text-sm text-muted text-lg-start"
                >
                  ©
                  <script>
                    document.write(new Date().getFullYear());
                  </script>
                  , made with <i class="fa fa-heart"></i> by
                  <a
                    href="https://www.creative-tim.com"
                    class="font-weight-bold"
                    target="_blank"
                    >Creative Tim</a
                  >
                  for a better web.
                </div>
              </div>
              <div class="col-lg-6">
                <ul
                  class="nav nav-footer justify-content-center justify-content-lg-end"
                >
                  <li class="nav-item">
                    <a
                      href="https://www.creative-tim.com"
                      class="nav-link text-muted"
                      target="_blank"
                      >Creative Tim</a
                    >
                  </li>
                  <li class="nav-item">
                    <a
                      href="https://www.creative-tim.com/presentation"
                      class="nav-link text-muted"
                      target="_blank"
                      >About Us</a
                    >
                  </li>
                  <li class="nav-item">
                    <a
                      href="https://www.creative-tim.com/blog"
                      class="nav-link text-muted"
                      target="_blank"
                      >Blog</a
                    >
                  </li>
                  <li class="nav-item">
                    <a
                      href="https://www.creative-tim.com/license"
                      class="nav-link pe-0 text-muted"
                      target="_blank"
                      >License</a
                    >
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </footer>
      </div>